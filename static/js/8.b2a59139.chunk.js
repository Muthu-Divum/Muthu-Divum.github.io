(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{239:function(e,t,n){"use strict";var a=n(28),i=n(29),r=n(31),o=n(30),c=n(32),s=n(1),d=n.n(s),u=n(34),l=n(453),p=(n(244),d.a.createElement(u.a,{type:"loading",style:{fontSize:30},spin:!0})),h=function(e){function t(){return Object(a.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return d.a.createElement("div",{className:"loader"},d.a.createElement(l.a,{indicator:p}))}}]),t}(s.Component);t.a=h},244:function(e,t,n){},263:function(e,t,n){"use strict";n.r(t),n.d(t,"FORCE",function(){return o});var a=n(252),i=n(14),r=n.n(i),o=function(e){var t=a.h(a.i),n=function(t){return e.color(t.id)},i=function(e){},o=function(e){e.call(a.a().on("start",d).on("drag",u).on("end",l));var t=Math.random(),n=Math.random();e.attr("transform",function(e){return isNaN(e.x)||isNaN(e.y)?"translate("+t+","+n+")":"translate("+e.x+","+e.y+")"}).attr("cx",function(e){return isNaN(e.x)?t:Math.max(30,Math.min(970,e.x))}).attr("cy",function(e){return isNaN(e.y)?n:Math.max(30,Math.min(970,e.y))})},c=function(e){e.attr("x1",function(e){return isNaN(e.source.x)?Math.random():e.source.x}).attr("y1",function(e){return isNaN(e.source.y)?Math.random():e.source.y}).attr("x2",function(e){return isNaN(e.target.x)?Math.random():e.target.x}).attr("y2",function(e){return isNaN(e.target.y)?Math.random():e.target.y})},s=function(e){e.selectAll(".node").call(o),e.selectAll(".link").call(c)},d=function(t){a.b.active||e.force.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y},u=function(e){e.fx=a.b.x,e.fy=a.b.y},l=function(t){a.b.active||e.force.alphaTarget(0),t.fx=null,t.fy=null};return e.width=1e3,e.color=t,e.height=1e3,e.enterNode=function(e){e.select("circle").attr("r",10).style("fill",n).call(a.a().on("start",d).on("drag",u).on("end",l)).on("click",i);e.select("text").attr("dy",20).style("fill","black").style("font-weight","600").style("text-transform","uppercase").style("text-anchor","middle").style("alignment-baseline","middle").style("font-size","8px").style("font-family","cursive")},e.updateNode=o,e.enterLink=function(e){e.attr("stroke-width",1).attr("stroke","grey")},e.updateLink=c,e.updateGraph=s,e.initForce=function(t,n){e.force=a.g(t).force("charge",a.f()).force("center",a.c().x(e.width/2).y(e.height/2)).force("link",a.e(n).distance(100).id(function(e){return e.index})).force("collide",a.d([5]).iterations([5])).restart()},e.stop=function(){e.force.stop()},e.restartGraph=function(e,t){a.g(e).force("node",a.g(e)).force("link",a.e(t).distance(100)).restart()},e.dragStarted=d,e.dragging=u,e.dragEnded=l,e.drag=function(){return a.k("g.node").call(a.a().on("start",d).on("drag",u).on("end",l))},e.tick=function(t){t.d3Graph=a.j(r.a.findDOMNode(t)),e.force.on("tick",function(){t.d3Graph.call(s)})},e.nodeClick=i,e}(o||{})},363:function(e,t,n){"use strict";var a=n(5),i=n(28),r=n(29),o=n(31),c=n(30),s=n(32),d=n(38),u=n(1),l=n.n(u),p=n(820),h=n(99),f=n(239),m=n(14),k=n.n(m),y=n(252),N=n(263),g=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.d3Link=y.j(k.a.findDOMNode(this)).datum(this.props.data).call(N.FORCE.enterLink)}},{key:"componentDidUpdate",value:function(){this.d3Link.datum(this.props.data).call(N.FORCE.updateLink)}},{key:"render",value:function(){return 2!==this.props.data.type||this.props.data.isParent?l.a.createElement("line",{className:"link"}):null}}]),t}(u.Component),v=n(263),O=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.d3Node=y.j(k.a.findDOMNode(this)).datum(this.props.data).call(v.FORCE.enterNode)}},{key:"componentDidUpdate",value:function(){this.d3Node.datum(this.props.data).call(v.FORCE.updateNode)}},{key:"childNodeClicked",value:function(e,t,n,a){switch(n){case 0:"invoice"===e||isNaN(e)||this.props.nodeClicked(e,t,1,a,0);break;case 1:"invoice"===e||isNaN(e)||this.props.nodeClicked(e,t,2,a,1);break;case 2:this.props.nodeClicked(e,t,1,a,0)}}},{key:"render",value:function(){var e=this;return 2!==this.props.data.type||this.props.data.isParent?l.a.createElement("g",{className:"node",onClick:function(){return e.childNodeClicked(e.props.data.id,e.props.data.name,e.props.data.type,e.props.data.isParent)}},l.a.createElement("circle",{fill:"purple"}),l.a.createElement("text",null,this.props.data.name)):null}}]),t}(u.Component),b=n(22),j=b.a.getGraphNode,L=b.a.getGraphLink,C=n(263),E=[],F=[],x=[],w=[],G=[],R=[],S=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(o.a)(this,Object(c.a)(t).call(this,e))).state={isLoading:!1,showHideFlag:0,graphnodes:[],graphlinkData:[],currrentNode:{}},n.onClickNode=n.onClickNode.bind(Object(d.a)(Object(d.a)(n))),n.crawlJSON=n.crawlJSON.bind(Object(d.a)(Object(d.a)(n))),n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.setState({isLoading:!0}),void 0!==this.props.isFromReceipts&&this.props.isFromReceipts?this.generateDataFromJsonLd():this.props.getGraphNode()}},{key:"componentWillUnmount",value:function(){E=[],x=[],G=[],R=[],this.setState({graphnodes:[],graphlinkData:[],isLoading:!1})}},{key:"generateDataFromJsonLd",value:function(){var e,t=this;e=JSON.parse(this.props.nodeId.jsonLd);var n=JSON.parse(this.props.nodeId.jsonLd)["@id"];this.pushNode(n),this.crawlJSON(e,n),G=[],R=[],setTimeout(function(){t.generateNodesAndLinksComponent(),C.FORCE.initForce(E,x),C.FORCE.tick(t),C.FORCE.drag(),t.setState({graphnodes:E,isLoading:!1})},2e3)}},{key:"crawlJSON",value:function(e,t,n){var a,i=t.name;if(a=0===n?1:2,e)for(var r=Object.keys(e),o=0;o<r.length;o++){var c=r[o];if("id"!==c&&"type"!==c&&"name"!==c&&"@id"!==c&&"@name"!==c&&"@type"!==c&&"value"!==c)if(Array.isArray(e[c]))this.crawlJSONArray(e[c],t,n);else{var s=c+"_"+i,d={name:c,id:s};if(this.pushNode(d,a,!1),"object"!==typeof e[c]){var u=String(e[c]),l={name:u,id:u+"_"+i};this.createLink(t,s,a,!1),this.pushNode(l,a,!1),this.createLink(s,l,a,!1)}else this.createLink(t,s,a,!1),this.crawlJSON(e[c],c,n)}}}},{key:"crawlJSONArray",value:function(e,t,n){for(var a=Object.keys(e),i=0;i<a.length;i++){var r=a[i];Array.isArray(e[r])?this.crawlJSONArray(e[r],t,n):this.crawlJSON(e[r],t,n)}}},{key:"pushNode",value:function(e,t,n){t=void 0!==t?t:0,n=void 0!==n&&n;var a,i,r=!0;if("object"===typeof e?(a=e.id,i=E.some(function(e){return e.id===a}),r=!!e.canFetchData&&e.canFetchData,e=e.name):(i=E.some(function(t){return t.id===e}),a=e),i)for(var o in E)E[o].id===a&&(E[o].type=t);else E.push({id:a,name:e,canFetchData:r,type:t,isParent:n}),F.push({id:a,name:e,canFetchData:r,type:t,isParent:n})}},{key:"createLink",value:function(e,t,n,a){var i,r;if("object"===typeof e){var o=e.id;E.some(function(e){return e.id===o})||this.pushNode(e,n,a),e=o,i=x.some(function(e){return e.source.id===o})}if("object"===typeof t){var c=t.id;E.some(function(e){return e.id===c})||this.pushNode(t,n,a),t=c,r=x.some(function(e){return e.target.id===c})}if(e!==t){var s=E.findIndex(function(t){return t.name===e});-1===s&&(s=E.findIndex(function(t){return t.id===e}));var d=E.findIndex(function(e){return e.id===t});if(-1===d&&(d=E.findIndex(function(e){return e.name===t})),-1!==s&&-1!==d)if(i||r)for(var u in x)e===x[u].source.id&&t===x[u].target.id&&(x[u].type=n);else x.push({source:s,target:d,type:n,isParent:a}),w.push({source:s,target:d,type:n,isParent:a})}}},{key:"componentWillReceiveProps",value:function(e){if(void 0!==e.GraphNode.content&&this.props.GraphNode.content!==e.GraphNode.content&&200===e.GraphNode.status){var t=[],n=this;(t=e.GraphNode.content.node).push({id:"invoice",name:"invoice"});for(var a=0;a<t.length;a++)this.pushNode(t[a],0,!0);for(var i=0;i<t.length;i++)this.createLink("invoice",t[i],0,!0);this.generateNodesAndLinksComponent(),C.FORCE.initForce(E,x),C.FORCE.tick(this),C.FORCE.drag(),this.setState({graphnodes:t,isLoading:!1})}if(void 0!==e.GraphLink.content&&this.props.GraphLink.content!==e.GraphLink.content){n=this;var r=e.GraphLink.content.node[0];F=[],w=[],this.crawlJSON(r,this.state.currrentNode,this.state.showHideFlag),G=[],R=[],setTimeout(function(){n.generateNodesAndLinksComponent(),C.FORCE.initForce(E,x),C.FORCE.tick(n),C.FORCE.drag(),n.setState(function(e){return{isLoading:!1}}),n.forceUpdate()},1e3)}}},{key:"onClickNode",value:function(e,t,n,a,i){if(void 0===this.props.isFromReceipts||!this.props.isFromReceipts){var r={name:t,id:e};if(!isNaN(t)&&a&&"invoice"!==e){for(var o in E)E[o].id===e&&(E[o].type=n);this.setState({currrentNode:r,isLoading:!0,showHideFlag:i}),C.FORCE.stop(),this.props.getGraphLink(e)}}}},{key:"generateNodesAndLinksComponent",value:function(){var e=this;R=E.map(function(t,n){return l.a.createElement(O,{data:t,name:t.name,key:n,nodeClicked:e.onClickNode})}),G=x.map(function(e,t){return l.a.createElement(g,{key:t,data:e})})}},{key:"getLinks",value:function(){return G}},{key:"getNodes",value:function(){return R}},{key:"render",value:function(){return l.a.createElement("div",{className:"graph__container"},this.state.isLoading?l.a.createElement(f.a,null):null,l.a.createElement("svg",{className:"d3",width:C.FORCE.width,height:C.FORCE.height},l.a.createElement("g",null,this.getLinks()),l.a.createElement("g",null,this.getNodes())))}}]),t}(l.a.Component);t.a=Object(h.b)(function(e){return Object(a.a)({},e,{GraphNode:e.modelExplorer.GraphNode,GraphLink:e.modelExplorer.GraphLink})},{getGraphNode:j,getGraphLink:L})(Object(p.a)(S))},703:function(e,t,n){},822:function(e,t,n){"use strict";n.r(t);var a=n(28),i=n(29),r=n(31),o=n(30),c=n(32),s=n(1),d=n.n(s),u=n(820),l=n(102),p=(n(703),n(363)),h=function(e){function t(){return Object(a.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return d.a.createElement("div",{className:"model-explorer-page "},d.a.createElement(p.a,null))}}]),t}(l.a);t.default=Object(u.a)(h)}}]);
//# sourceMappingURL=8.b2a59139.chunk.js.map